/**
* @file main.c
* @brief Description
* @date 2020-05-13
* @author Patricio R. Domingues
*/

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <assert.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdint.h>


int main(int argc, char *argv[]){
	/* Disable warnings */

	if( argc != 2 ){
		fprintf(stderr,"usage: %s <filename>\n", argv[0]);
		exit(1);
	}

	char *fname = argv[1];

	int F;
	F = open(fname, O_RDONLY);
	if ( F == -1 ) {
		fprintf(stderr,"Error: cannot open file '%s'\n", fname);
		exit(2);
	}
	printf("===========================================\n");
	// Leitura de um byte 
	unsigned char one_byte;
	assert(sizeof(one_byte)==1);
	read(F, &one_byte, sizeof(one_byte));
	printf("one_byte=0x%x\n", one_byte);
	close(F);

	F = open(fname, O_RDONLY);
	unsigned short two_bytes;
	assert(sizeof(two_bytes)==2);
	read(F, &two_bytes, sizeof(two_bytes));
	printf("two_bytes=0x%x\n", two_bytes);
	close(F);

	F = open(fname, O_RDONLY);
	unsigned int four_bytes;
	assert(sizeof(four_bytes)==4);
	read(F, &four_bytes, sizeof(four_bytes));
	printf("four_bytes=0x%x\n", four_bytes);
	close(F);

	printf("===========================================\n");

	// requer:
	// #include <stdint.h>

	F = open(fname, O_RDONLY);
	uint8_t um_byte;
	read(F, &um_byte, sizeof(um_byte));
	printf("um_byte=0x%x (HEX)\n", um_byte);
	printf("um_byte=%u (DECIMAL)\n", um_byte);
	close(F);

	printf("----\n");
	F = open(fname, O_RDONLY);
	uint16_t dois_bytes;
	read(F, &dois_bytes, sizeof(dois_bytes));
	printf("dois_bytes=0x%x (HEX)\n", dois_bytes);
	printf("dois_bytes=%u (DECIMAL)\n", dois_bytes);
	close(F);

	printf("----\n");
	F = open(fname, O_RDONLY);
	uint32_t quatro_bytes;
	read(F, &quatro_bytes, sizeof(quatro_bytes));
	printf("quatro_bytes=0x%x (HEX)\n", quatro_bytes);
	printf("quatro_bytes=%u (DECIMAL)\n", quatro_bytes);
	close(F);


	return 0;
}
